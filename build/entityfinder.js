var EntityFinder=function(){"use strict";var a,b=function(b){a=document.createElement("div"),a.innerHTML=g.box,document.body.appendChild(a),document.getElementById("closeBtn").onclick=function(){c()},document.getElementById("advancedFilterBtn").onclick=function(){var a=document.getElementById("field").value,f=b.get_entityTypeName();d(e(f,a,document.getElementById("searchString").value),b),c()}},c=function(){a.parentNode.removeChild(a)},d=function(a,b){b.SetParameter("fetchXml",a),b.refresh()},e=function(a,b,c){var d,e="";d=c.indexOf(",")!=-1?c.split(","):c.split("\n");for(var f=0;f<d.length;f++)e+='<condition attribute="'+b+'" operator="eq" value="'+d[f]+'" />';var g='<fetch mapping="logical"><entity name="'+a+'"><filter type="and"><filter type="or">'+e+"</filter></filter></entity></fetch>";return g},f=function(){var a={};return a.box="position:absolute;top:30%;left:30%;box-shadow:0 5px 15px rgba(0, 0, 0, 0.5);border:1px solid rgba(0, 0, 0, 0.2);border-radius:6px;padding:30px;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;color:#333333;font-size:14px;background-color:#ffffff;",a.input="padding: 6px 12px;border: 1px solid #cccccc;border-radius: 4px;width:100%;box-sizing:border-box;",a.button="padding:6px 12px;border:1px solid transparent;border-radius:4px;border-color:#adadad;background-color:#ffffff;cursor:pointer;font-size:14px;color:#333333;background-image:none;height:100%;",a.button_b="background-color:#428bca!important;color:#ffffff!important;"+a.button,a}(),g=function(){var a={};return a.box='<div id="innerBox" style="'+f.box+'"><strong>Searchfield:</strong><br /><input type="text" id="field" style="'+f.input+'"></select><br /><br /><strong>Values:</strong><br /><textarea rows="10" cols="50" id="searchString" style="'+f.input+'"></textarea><br /><button id="advancedFilterBtn" style="'+f.button_b+'">Search</button>&nbsp;<button id="closeBtn" style="'+f.button+'">Close</button></div>',a}();return{show:b}}();grid=parent.frames.contentIFrame.document.getElementById("crmGrid").control,EntityFinder.show(grid);